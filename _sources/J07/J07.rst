Индексирање табеле
===================================


Видели смо да је рад са колонама табеле веома једноставан када се користи библиотека *pandas*.

Да бисмо могли да радимо са редовима табеле треба прво да нађемо једну колону чија вредност једнозначно
одређује цео ред табеле. На пример, у табели из прошле лекције

.. csv-table:: Подаци о групи деце
   :header: "Ime", "Pol", "Starost", "Masa", "Visina"
   :align: left

   "Ana", "ž", "13", "46", "160"
   "Bojan", "m", "14", "52", "165"
   "Vlada", "m", "13", "47", "157"
   "Gordana", "ž", "15", "54", "165"
   "Dejan", "m", "15", "56", "163"
   "Đorđe", "m", "13", "45", "159"
   "Elena", "ž", "14", "49", "161"
   "Žaklina", "ž", "15", "52", "164"
   "Zoran", "m", "15", "57", "167"
   "Ivana", "ž", "13", "45", "158"
   "Jasna", "ž", "14", "51", "162"

колона "Ime" је таква колона (колона "Visina" није погодна јер имамо двоје деце са висином 165,
па када кажемо "дете са висином 165" није јасно о коме се ради; исто тако ни колоне "Pol", "Starost" и
"Masa" нису погодне).

.. infonote::

   Колона која има особину да свака вредност у тој колони једнозначно
   одређује цео ред табеле се зове *кључ* јер је она *кључна* за приступање редовима табеле.


Ако желимо да приступамо елементима табеле по редовима, морамо систему да пријавимо коју колону ћемо користити као кључ. То се постиже позивом функције ``set_index`` којој проследимо име колоне, а она врати нову табелу "индексирану по датом кључу":

.. ipython::

   In [1]: import pandas as pd
      ...: podaci = [["Ana",     "ž", 13, 46, 160],
      ...:           ["Bojan",   "m", 14, 52, 165],
      ...:           ["Vlada",   "m", 13, 47, 157],
      ...:           ["Gordana", "ž", 15, 54, 165],
      ...:           ["Dejan",   "m", 15, 56, 163],
      ...:           ["Đorđe",   "m", 13, 45, 159],
      ...:           ["Elena",   "ž", 14, 49, 161],
      ...:           ["Žaklina", "ž", 15, 52, 164],
      ...:           ["Zoran",   "m", 15, 57, 167],
      ...:           ["Ivana",   "ž", 13, 45, 158],
      ...:           ["Jasna",   "ž", 14, 51, 162]]
      ...: tabela = pd.DataFrame(podaci)
      ...: tabela.columns=["Ime", "Pol", "Starost", "Masa", "Visina"]
      ...: tabela1=tabela.set_index("Ime")

Нова табела (``tabela1``) се од старе (``tabela``) разликује само по томе што редови више нису индексирани бројевима (0, 1, 2, ...) већ именима деце (Ana, Bojan, Vlada, ...). Ево старе (неиндексиране табеле) која има колону "Ime" и чији редови су индексирани бројевима:

.. ipython::

   In [1]: tabela

А ево и нове табеле у којој су редови индексирани именима деце:

.. ipython::

   In [1]: tabela1

Колона "Ime" је и даље присутна у табели ``tabela1``, али има посебан статус. Ако покушамо да јој приступимо као
"обичној" колони

.. code-block:: python

   tabela1["Ime"]

добићемо грешку. Међутим, она је ту као *индексна колона*:

.. ipython::

   In [1]: tabela1.index

Ако желимо да прикажемо висину деце у групи графиконом тако да имена деце буду на хоризонталној оси, то сада можемо урадити овако:

.. ipython::
   :okwarning:

   @savefig J07slika1.png
   In [1]: import matplotlib.pyplot as plt
      ...: plt.figure(figsize=(10,5))
      ...: plt.bar(tabela1.index, tabela1["Visina"])
      ...: plt.title("Visina dece u grupi")
      ...: plt.show()

.. ipython::
   :suppress:

   In [1]: plt.close()

Ознаке на хоризонталној оси узимамо из индексне колоне ``tabela1.index``, док податке о висини стубића узимамо из колоне ``tabela1["Visina"]``.

